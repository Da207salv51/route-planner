<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Scout Travel Hub 2026</title>
    <style>
        :root { --scout-green: #1b5e20; --gold: #fbc02d; --bg: #f4f7f6; --danger: #d32f2f; --info: #0288d1; --success: #2e7d32; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); margin: 0; padding: 15px; color: #333; }
        .app-card { max-width: 600px; margin: auto; background: white; border-radius: 25px; padding: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.15); }
        header { text-align: center; border-bottom: 3px solid var(--scout-green); padding-bottom: 15px; margin-bottom: 20px; }
        .clock { font-size: 0.9em; color: #666; font-weight: bold; }
        .countdown { background: #212121; color: var(--gold); padding: 15px; border-radius: 15px; text-align: center; font-weight: bold; margin: 15px 0; border: 2px solid var(--gold); }
        .section { background: #fff; border: 1px solid #e0e0e0; border-radius: 18px; padding: 15px; margin-bottom: 15px; }
        label { font-weight: bold; color: var(--scout-green); display: block; margin-bottom: 8px; text-transform: uppercase; font-size: 0.8em; }
        input, select, button { width: 100%; padding: 14px; border-radius: 12px; border: 1px solid #ccc; font-size: 16px; box-sizing: border-box; outline: none; }
        button { background: var(--scout-green); color: white; border: none; font-weight: bold; margin-top: 10px; cursor: pointer; transition: 0.2s; }
        .btn-flight { background: var(--info); margin-top: 5px; }
        
        .status-box { padding: 12px; border-radius: 12px; margin-top: 10px; font-weight: bold; font-size: 0.9em; border: 2px solid; }
        .danger { background: #ffebee; color: var(--danger); border-color: var(--danger); }
        .safe { background: #e8f5e9; color: var(--success); border-color: var(--success); }
        
        .logistics-card { background: #f1f8e9; border: 1px dashed var(--scout-green); padding: 15px; border-radius: 12px; margin-top: 10px; }
        .checklist-item { display: flex; align-items: center; padding: 12px; border-bottom: 1px solid #eee; cursor: pointer; }
        .checked-item span { text-decoration: line-through; color: #aaa; font-style: italic; }
        .hidden { display: none; }
    </style>
</head>
<body>

<div class="app-card">
    <header>
        <div id="liveClock" class="clock"></div>
        <h1 style="margin:5px 0; color: var(--scout-green);">‚öúÔ∏è Scout Travel Hub</h1>
    </header>

    <div class="section">
        <label>Partenza Route 2026:</label>
        <input type="date" id="dateInput" onchange="initApp()">
        <div id="countdownBox" class="countdown">Scegli la data</div>
    </div>

    <div id="stepNazione" class="hidden">
        <div class="section">
            <label>Nazione di Destinazione:</label>
            <input type="text" id="searchBox" placeholder="Cerca nazione..." onkeyup="searchCountry()">
            <select id="countrySelect" size="5" style="margin-top:10px;"></select>
        </div>
        <button onclick="buildRoute()">VERIFICA VIAGGIO E ZAINO</button>
    </div>

    <div id="results" class="hidden">
        <div id="statusAlert" class="status-box"></div>
        
        <div class="logistics-card">
            <h4 style="margin:0 0 10px 0; color: var(--scout-green);">üõ∞Ô∏è LOGISTICA E TRASPORTI</h4>
            <div id="logisticsInfo"></div>
            <button id="flightBtn" class="btn-flight" onclick="openFlights()">‚úàÔ∏è CERCA VOLI E COSTI</button>
        </div>

        <div id="healthInfo" class="section" style="margin-top:15px; border-left: 5px solid #ff5722;"></div>

        <h3>üìù Zaino 70L (Tocca per segnare)</h3>
        <div id="checklistContainer"></div>
    </div>
</div>

<script>
    const database = {
        "Kenya": { vax: "Febbre Gialla (Obbligatoria), Malaria (Consigliata)", travel: "Aereo", dist: "Oltreoceano", security: "Safe/Warn", pass: true },
        "Giappone": { vax: "Nessuno obbligatorio", travel: "Aereo", dist: "Lontana", security: "Safe", pass: true },
        "USA": { vax: "Nessuno obbligatorio", travel: "Aereo", dist: "Oltreoceano", security: "Safe", pass: true },
        "Brasile": { vax: "Febbre Gialla, Epatite A", travel: "Aereo", dist: "Oltreoceano", security: "Warn", pass: true },
        "Spagna": { vax: "Nessuno", travel: "Nave / Bus / Treno", dist: "Vicina", security: "Safe", pass: false },
        "Grecia": { vax: "Nessuno", travel: "Nave / Aereo", dist: "Vicina", security: "Safe", pass: false },
        "Islanda": { vax: "Nessuno", travel: "Aereo", dist: "Media", security: "Safe", pass: false },
        "Marocco": { vax: "Epatite A, Tifo (Consigliati)", travel: "Nave / Aereo", dist: "Media", security: "Safe", pass: true },
        "Ucraina": { vax: "N/A", travel: "Bloccato", dist: "Est Europa", security: "Danger", pass: true }
    };

    const continents = {
        "Europa": ["Albania", "Austria", "Belgio", "Croazia", "Francia", "Germania", "Grecia", "Islanda", "Italia", "Norvegia", "Polonia", "Portogallo", "Regno Unito", "Spagna", "Svezia", "Svizzera", "Ucraina"],
        "Extra-Europa": ["Argentina", "Australia", "Brasile", "Canada", "Cina", "Egitto", "Giappone", "India", "Israele", "Kenya", "Marocco", "Messico", "Stati Uniti", "Sudafrica", "Tailandia", "Turchia"]
    };

    let selectedCountry = "";

    function updateTime() {
        document.getElementById('liveClock').innerText = new Date().toLocaleString('it-IT');
    }
    setInterval(updateTime, 1000);

    function initApp() {
        const p = new Date(document.getElementById('dateInput').value);
        const diff = Math.ceil((p - new Date()) / 86400000);
        document.getElementById('countdownBox').innerText = diff > 0 ? `MANCANO ${diff} GIORNI!` : "BUONA STRADA!";
        document.getElementById('stepNazione').classList.remove('hidden');
        searchCountry();
    }

    function searchCountry() {
        const query = document.getElementById('searchBox').value.toLowerCase();
        const sel = document.getElementById('countrySelect');
        sel.innerHTML = '';
        for (const [area, nazioni] of Object.entries(continents)) {
            nazioni.filter(n => n.toLowerCase().includes(query)).forEach(n => {
                let opt = document.createElement('option');
                opt.value = n;
                opt.dataset.area = area;
                opt.innerText = `${n} (${area})`;
                sel.appendChild(opt);
            });
        }
    }

    function buildRoute() {
        const sel = document.getElementById('countrySelect');
        if(!sel.value) return alert("Scegli una nazione!");
        
        selectedCountry = sel.value;
        const area = sel.options[sel.selectedIndex].dataset.area;
        const res = document.getElementById('results');
        const logistics = document.getElementById('logisticsInfo');
        const health = document.getElementById('healthInfo');
        
        res.classList.remove('hidden');

        let data = database[selectedCountry] || { vax: "Controllare sito Viaggiare Sicuri", travel: area === "Europa" ? "Bus/Treno" : "Aereo", dist: "Da calcolare", security: "Safe", pass: (area === "Extra-Europa") };

        // 1. Allerta Sicurezza
        const alertBox = document.getElementById('statusAlert');
        alertBox.className = `status-box ${data.security === 'Danger' ? 'danger' : 'safe'}`;
        alertBox.innerText = data.security === 'Danger' ? "‚ö†Ô∏è DOGANA CHIUSA O RISCHIOSA" : "‚úÖ DOGANA APERTA";

        // 2. Logistica
        logistics.innerHTML = `
            üìç <b>Distanza:</b> ${data.dist}<br>
            üö¢ <b>Mezzo consigliato:</b> ${data.travel}<br>
            üõÇ <b>Passaporto:</b> ${data.pass ? "S√¨, obbligatorio" : "No, basta C.I."}
        `;

        // 3. Vaccini
        health.innerHTML = `<b>üíâ INFO SANITARIE:</b><br>${data.vax}`;

        // 4. Zaino
        const zaino = ["Zaino 70L", "Sacco a pelo", "Gavetta", "Borraccia", "Scarponi", "Kit Medico", "Poncho"];
        if(data.pass) zaino.push("Passaporto", "Assicurazione Viaggio");
        if(data.travel.includes("Aereo")) zaino.push("Liquidi < 100ml", "Bilancia Pesa Valigie");

        document.getElementById('checklistContainer').innerHTML = zaino.map((item, i) => `
            <div class="checklist-item" onclick="toggleItem(this)">
                <input type="checkbox" id="i-${i}">
                <span>${item}</span>
            </div>
        `).join('');
    }

    function toggleItem(el) {
        const cb = el.querySelector('input');
        cb.checked = !cb.checked;
        el.classList.toggle('checked-item', cb.checked);
    }

    function openFlights() {
        if(!selectedCountry) return;
        // Reindirizza a Skyscanner con la nazione selezionata
        const url = `https://www.skyscanner.it/trasporti/voli-da/it/${selectedCountry.toLowerCase()}/?adults=1&children=0&infants=0&cabinclass=economy&ref=home`;
        window.open(url, '_blank');
    }
</script>
</body>
</html>
