<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Scout Route Planner 2026</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <style>
        :root { --green: #1b5e20; --gold: #fbc02d; --light: #f1f8e9; --danger: #c62828; }
        body { font-family: -apple-system, sans-serif; background: #fafafa; margin: 0; padding: 10px; color: #333; }
        .app-container { max-width: 600px; margin: auto; background: white; border-radius: 25px; padding: 20px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); }
        header { text-align: center; border-bottom: 2px solid var(--green); padding-bottom: 15px; margin-bottom: 20px; }
        .live-clock { font-size: 0.85em; color: #666; font-weight: 500; }
        .countdown { background: #212121; color: var(--gold); padding: 15px; border-radius: 15px; text-align: center; font-size: 1.2em; font-weight: bold; margin: 15px 0; }
        .section { background: var(--light); border-radius: 15px; padding: 15px; margin-bottom: 15px; border: 1px solid #e0e0e0; }
        label { display: block; font-weight: bold; color: var(--green); margin-bottom: 8px; font-size: 0.9em; }
        select, input, button { width: 100%; padding: 14px; border-radius: 12px; border: 1px solid #ccc; font-size: 16px; box-sizing: border-box; }
        button { background: var(--green); color: white; border: none; font-weight: bold; margin-top: 10px; cursor: pointer; }
        .dossier { background: #fff; border-left: 6px solid var(--green); padding: 15px; border-radius: 8px; margin-top: 20px; font-size: 0.95em; line-height: 1.6; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .checklist-item { display: flex; align-items: center; padding: 12px; border-bottom: 1px solid #eee; }
        .checklist-item input { width: 22px; height: 22px; margin-right: 15px; accent-color: var(--green); }
        .hidden { display: none; }
        .warning { color: var(--danger); font-weight: bold; font-size: 0.8em; margin-top: 5px; }
    </style>
</head>
<body>

<div class="app-container">
    <header>
        <div id="clock" class="live-clock">Caricamento ora...</div>
        <h1 style="margin:5px 0; color: var(--green);">‚öúÔ∏è Scout Planner 2026</h1>
    </header>

    <div class="section">
        <label>Giorno di Partenza Route:</label>
        <input type="date" id="dataPartenza" onchange="aggiornaSistema()">
        <div id="countdownDisplay" class="countdown">Scegli una data</div>
        <div id="stagioneInfo" style="text-align:center; font-weight:bold; color:var(--green);"></div>
    </div>

    <div id="menuEstivo" class="hidden">
        <div class="section">
            <label>Tipo di Route Estiva:</label>
            <select id="stileEstivo">
                <option value="cammino">üö∂ Cammino (Zaino in spalla 70L)</option>
                <option value="servizio">ü§ù Servizio (Base stanziale)</option>
            </select>
        </div>
        <div class="section">
            <label>Area Geografica:</label>
            <select id="areaGeo" onchange="popolaNazioni()">
                <option value="">-- Seleziona --</option>
                <option value="eu">Europa (UE/Schengen)</option>
                <option value="extra">Fuori Europa (Mondo)</option>
            </select>
        </div>
        <div id="nazioneSect" class="section hidden">
            <label>Nazione Destinazione:</label>
            <select id="selectNazione" onchange="aggiornaPeso()"></select>
        </div>
    </div>

    <button onclick="generaReport()">GENERA PIANO ZAINO</button>

    <div id="risultati" class="hidden">
        <div id="dossierTecnico" class="dossier"></div>
        <h3>üìù Checklist Zaino 70L</h3>
        <div id="listaOggetti"></div>
        <p class="warning" id="pesoWarning"></p>
    </div>
</div>

<script>
    // Database 2026
    const mondo = {
        eu: {
            "Spagna": { temp: "29¬∞C", doc: "C.I.", vac: "Nessuno", sim: "Roaming UE", mon: "Euro", lang: "Spagnolo", presa: "Tipo F" },
            "Islanda": { temp: "11¬∞C", doc: "C.I. Espatrio", vac: "Nessuno", sim: "Roaming UE", mon: "Corona", lang: "Islandese", presa: "Tipo F" },
            "Grecia": { temp: "31¬∞C", doc: "C.I.", vac: "Nessuno", sim: "Roaming UE", mon: "Euro", lang: "Greco", presa: "Tipo C/F" }
        },
        extra: {
            "Kenya": { temp: "24¬∞C", doc: "Passaporto + eVisa", vac: "Febbre Gialla (Obbl.)", sim: "e-SIM Locale", mon: "Scellino", lang: "Swahili", presa: "Tipo G" },
            "Giappone": { temp: "26¬∞C", doc: "Passaporto", vac: "Encefalite G. (Cons.)", sim: "e-SIM / Pocket WiFi", mon: "Yen", lang: "Giapponese", presa: "Tipo A" },
            "USA": { temp: "27¬∞C", doc: "Passaporto + ESTA", vac: "Nessuno", sim: "e-SIM", mon: "Dollaro", lang: "Inglese", presa: "Tipo A/B" },
            "Brasile": { temp: "25¬∞C", doc: "Passaporto", vac: "Febbre Gialla, Tifo", sim: "SIM Locale", mon: "Real", lang: "Portoghese", presa: "Tipo N" }
        }
    };

    function updateClock() {
        const ora = new Date();
        document.getElementById('clock').innerText = `Oggi: ${ora.toLocaleDateString('it-IT')} | Ore: ${ora.toLocaleTimeString('it-IT')}`;
    }
    setInterval(updateClock, 1000);
    updateClock();

    function aggiornaSistema() {
        const dP = new Date(document.getElementById('dataPartenza').value);
        const oggi = new Date();
        const diff = Math.ceil((dP - oggi) / 86400000);
        
        document.getElementById('countdownDisplay').innerText = diff > 0 ? `MANCANO ${diff} GIORNI!` : "BUONA STRADA!";
        
        const mese = dP.getMonth();
        const menuE = document.getElementById('menuEstivo');
        let stagione = "";

        if (mese >= 5 && mese <= 7) {
            stagione = "ESTIVA (Giugno-Agosto)";
            menuE.classList.remove('hidden');
        } else if (mese >= 2 && mese <= 4) {
            stagione = "PASQUALE (Primavera)";
            menuE.classList.add('hidden');
        } else {
            stagione = "INVERNALE (Inverno)";
            menuE.classList.add('hidden');
        }
        document.getElementById('stagioneInfo').innerText = "STAGIONE: " + stagione;
    }

    function popolaNazioni() {
        const area = document.getElementById('areaGeo').value;
        const sel = document.getElementById('selectNazione');
        document.getElementById('nazioneSect').classList.remove('hidden');
        sel.innerHTML = '<option value="">-- Scegli --</option>';
        if(area) {
            Object.keys(mondo[area]).forEach(n => sel.add(new Option(n, n)));
        }
    }

    function generaReport() {
        const dP = document.getElementById('dataPartenza').value;
        if(!dP) return alert("Inserisci la data!");

        const mese = new Date(dP).getMonth();
        const res = document.getElementById('risultati');
        const doss = document.getElementById('dossierTecnico');
        const list = document.getElementById('listaOggetti');
        
        res.classList.remove('hidden');
        let zaino = ["Zaino 70L", "Gavetta", "Borraccia 1.5L", "Kit Pronto Soccorso", "Poncho"];
        let capienzaUsata = "75%";

        if (mese >= 5 && mese <= 7) {
            const area = document.getElementById('areaGeo').value;
            const nName = document.getElementById('selectNazione').value;
            const stile = document.getElementById('stileEstivo').value;
            const n = mondo[area][nName];

            doss.innerHTML = `
                <b>DOSSIER MONDIALE: ${nName.toUpperCase()}</b><br>
                üå°Ô∏è Temp: ${n.temp} | üÜî Doc: ${n.doc}<br>
                üíâ Vaccini: ${n.vac}<br>
                üì± Rete: ${n.sim} | üîå Prese: ${n.presa}<br>
                üó£Ô∏è Lingua: ${n.lang} | üí∞ Moneta: ${n.mon}
            `;
            zaino.push("Sacco a pelo leggero", "7 ricambi intimo", "Crema Solare", "Cappello");
            if(stile === 'cammino') { zaino.push("Scarponi trekking", "Calze anti-vesciche"); capienzaUsata = "90%"; }
            if(area === 'extra') { zaino.push("Adattatore", "Powerbank 20Ah", "Copia Passaporto"); }
        } else if (mese >= 2 && mese <= 4) {
            doss.innerHTML = "<b>Route Pasquale:</b> Clima variabile, focus impermeabilit√†.";
            zaino.push("Sacco a pelo medio", "Scarponi", "3 ricambi");
        } else {
            doss.innerHTML = "<b>Route Invernale:</b> Focus isolamento termico.";
            zaino.push("Sacco a pelo -5¬∞C", "Maglia termica", "Berretto e Guanti");
        }

        document.getElementById('pesoWarning').innerText = `Volume stimato: ${capienzaUsata} del 70L.`;
        list.innerHTML = zaino.map(i => `<div class="checklist-item"><input type="checkbox"><span>${i}</span></div>`).join('');
    }
</script>
</body>
</html>
