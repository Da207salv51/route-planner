<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Scout Safe Route 2026</title>
    <style>
        :root { --scout-green: #1b5e20; --gold: #fbc02d; --bg: #f4f7f6; --danger: #d32f2f; --warning: #ff9800; --success: #2e7d32; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); margin: 0; padding: 15px; color: #333; }
        .app-card { max-width: 600px; margin: auto; background: white; border-radius: 25px; padding: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.15); }
        header { text-align: center; border-bottom: 3px solid var(--scout-green); padding-bottom: 15px; margin-bottom: 20px; }
        .clock { font-size: 0.9em; color: #666; font-weight: bold; }
        .countdown { background: #212121; color: var(--gold); padding: 15px; border-radius: 15px; text-align: center; font-weight: bold; margin: 15px 0; border: 2px solid var(--gold); }
        .section { background: #fff; border: 1px solid #e0e0e0; border-radius: 18px; padding: 15px; margin-bottom: 15px; }
        label { font-weight: bold; color: var(--scout-green); display: block; margin-bottom: 8px; text-transform: uppercase; font-size: 0.8em; }
        input, select, button { width: 100%; padding: 14px; border-radius: 12px; border: 1px solid #ccc; font-size: 16px; box-sizing: border-box; outline: none; }
        button { background: var(--scout-green); color: white; border: none; font-weight: bold; margin-top: 10px; cursor: pointer; transition: 0.2s; }
        
        /* Alert Dogana e Sicurezza */
        .status-box { padding: 15px; border-radius: 12px; margin-top: 10px; font-weight: bold; text-align: center; border: 2px solid; }
        .danger { background: #ffebee; color: var(--danger); border-color: var(--danger); }
        .safe { background: #e8f5e9; color: var(--success); border-color: var(--success); }
        .warn { background: #fff3e0; color: var(--warning); border-color: var(--warning); }

        /* Checklist con "Stiratura" */
        .checklist-item { display: flex; align-items: center; padding: 12px; border-bottom: 1px solid #eee; cursor: pointer; }
        .checklist-item input { width: 22px; height: 22px; margin-right: 15px; accent-color: var(--scout-green); }
        .checked-item span { text-decoration: line-through; color: #aaa; font-style: italic; }
        
        .hidden { display: none; }
    </style>
</head>
<body>

<div class="app-card">
    <header>
        <div id="liveClock" class="clock"></div>
        <h1 style="margin:5px 0; color: var(--scout-green);">‚öúÔ∏è Safe Route 2026</h1>
    </header>

    <div class="section">
        <label>Partenza Route:</label>
        <input type="date" id="dateInput" onchange="initApp()">
        <div id="countdownBox" class="countdown">Scegli la data</div>
    </div>

    <div id="stepNazione" class="hidden">
        <div class="section">
            <label>Nazione di Destinazione:</label>
            <input type="text" id="searchBox" placeholder="Cerca nazione..." onkeyup="searchCountry()">
            <select id="countrySelect" size="5" style="margin-top:10px;"></select>
        </div>
        <button onclick="buildRoute()">VERIFICA DOGANE E ZAINO</button>
    </div>

    <div id="results" class="hidden">
        <div id="statusAlert" class="status-box"></div>
        <div id="dossierContent" style="padding: 15px; line-height: 1.6;"></div>
        <h3>üìù Zaino 70L (Tocca per segnare)</h3>
        <div id="checklistContainer"></div>
    </div>
</div>

<script>
    // Database Sicurezza 2026
    const securityDB = {
        "Ucraina": { status: "danger", info: "DOGANA CHIUSA - Zona di guerra attiva. Accesso vietato.", p: true },
        "Russia": { status: "danger", info: "DOGANA BLOCCATA - Sanzioni internazionali e visti sospesi.", p: true },
        "Kenya": { status: "warn", info: "APERTA CON CAUTELA - Serve eVisa. Evitare zone di confine.", p: true },
        "Israele": { status: "warn", info: "APERTA CON CONTROLLI - Situazione instabile. Possibili blocchi improvvisi.", p: true },
        "Palestina": { status: "danger", info: "CHIUSA/RISCHIOSA - Sconsigliato l'ingresso per motivi scout.", p: true },
        "Giappone": { status: "safe", info: "APERTA - Ingresso libero con passaporto.", p: true },
        "USA": { status: "safe", info: "APERTA - Serve passaporto + ESTA.", p: true },
        "Francia": { status: "safe", info: "APERTA - Libera circolazione UE.", p: false },
        "Spagna": { status: "safe", info: "APERTA - Libera circolazione UE.", p: false },
        "Germania": { status: "safe", info: "APERTA - Libera circolazione UE.", p: false }
    };

    const continents = {
        "Europa": ["Albania", "Austria", "Belgio", "Croazia", "Danimarca", "Francia", "Germania", "Grecia", "Italia", "Norvegia", "Polonia", "Portogallo", "Regno Unito", "Repubblica Ceca", "Spagna", "Svezia", "Svizzera", "Ucraina"],
        "Extra-Europa": ["Afghanistan", "Argentina", "Australia", "Brasile", "Canada", "Cina", "Egitto", "Giappone", "India", "Israele", "Kenya", "Marocco", "Messico", "Palestina", "Russia", "Stati Uniti", "Sudafrica", "Turchia"]
    };

    function updateTime() {
        document.getElementById('liveClock').innerText = new Date().toLocaleString('it-IT');
    }
    setInterval(updateTime, 1000);

    function initApp() {
        const p = new Date(document.getElementById('dateInput').value);
        const diff = Math.ceil((p - new Date()) / 86400000);
        document.getElementById('countdownBox').innerText = diff > 0 ? `MANCANO ${diff} GIORNI!` : "BUONA STRADA!";
        document.getElementById('stepNazione').classList.remove('hidden');
        searchCountry();
    }

    function searchCountry() {
        const query = document.getElementById('searchBox').value.toLowerCase();
        const sel = document.getElementById('countrySelect');
        sel.innerHTML = '';
        for (const [area, nazioni] of Object.entries(continents)) {
            nazioni.filter(n => n.toLowerCase().includes(query)).forEach(n => {
                let opt = document.createElement('option');
                opt.value = n;
                opt.dataset.area = area;
                opt.innerText = `${n} (${area})`;
                sel.appendChild(opt);
            });
        }
    }

    function buildRoute() {
        const sel = document.getElementById('countrySelect');
        if(!sel.value) return alert("Scegli una nazione!");
        
        const nazione = sel.value;
        const area = sel.options[sel.selectedIndex].dataset.area;
        const alertBox = document.getElementById('statusAlert');
        const doss = document.getElementById('dossierContent');
        document.getElementById('results').classList.remove('hidden');

        // Logica Sicurezza & Dogana
        let security = securityDB[nazione] || { status: "safe", info: "APERTA - Nessuna segnalazione critica.", p: (area === "Extra-Europa") };
        
        alertBox.className = `status-box ${security.status === 'danger' ? 'danger' : (security.status === 'warn' ? 'warn' : 'safe')}`;
        alertBox.innerHTML = `üõ°Ô∏è STATO DOGANA: ${security.info}`;

        const pStatus = security.p ? "‚ö†Ô∏è SERVE IL PASSAPORTO" : "‚úÖ BASTA CARTA D'IDENTIT√Ä";
        const pColor = security.p ? "var(--danger)" : "var(--success)";

        doss.innerHTML = `
            <h2 style="margin:0;">üìç ${nazione}</h2>
            <p style="color:${pColor}; font-weight:bold; border: 1px solid; padding: 5px; border-radius: 5px; text-align:center;">${pStatus}</p>
            <p>üîå <b>Prese:</b> ${area === 'Extra-Europa' ? 'Adattatore Universale' : 'Standard UE'}<br>
            üì± <b>Dati:</b> ${area === 'Extra-Europa' ? 'SIM Locale / e-SIM' : 'Roaming incluso'}</p>
        `;

        const zaino = ["Zaino 70L", "Sacco a pelo", "Gavetta", "Borraccia", "Scarponi", "Kit Medico", "Poncho"];
        if(security.p) zaino.push("Passaporto", "Copia Documenti");
        if(security.status === 'warn') zaino.push("Localizzatore GPS", "Numeri Emergenza Consolari");

        document.getElementById('checklistContainer').innerHTML = zaino.map((item, i) => `
            <div class="checklist-item" onclick="toggleItem(this)">
                <input type="checkbox" id="i-${i}">
                <span>${item}</span>
            </div>
        `).join('');
    }

    function toggleItem(el) {
        const cb = el.querySelector('input');
        cb.checked = !cb.checked;
        el.classList.toggle('checked-item', cb.checked);
    }
</script>
</body>
</html>
